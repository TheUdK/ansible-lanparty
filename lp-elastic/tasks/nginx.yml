---
- name: Nginx | Render Site Template
  template:
    src: nginx.site.j2
    dest: /etc/nginx/sites-available/elasticsearch
  notify: reload nginx

- name: Nginx | Symlink Site
  file:
    src: /etc/nginx/sites-available/elasticsearch
    dest: /etc/nginx/sites-enabled/elasticsearch
    state: link
  notify: reload nginx

- name: Nginx | HTTP Password
  copy:
    content: "{{ lp.user }}:{{ lp.pass_hash }}"
    dest: /etc/nginx/es_password
